pipeline {
    agent any
    environment{
        BASE_URL = 'https://rahulshettyacademy.com'
    }
    stages{
        stage("Checkout"){        
            steps{
            git branch: 'main', url:'https://github.com/theBozdemir/Automation-practice.git'
        }}
        stage("Install Dependencies"){
            steps{
                bat 'npm install'

            }
        }
        stage('Run cypress tests'){
            steps{
                bat 'npx cypress run --headless --spec cypress/e2e/Automation_Recap/ECommerceFrameworkBuilding/Framework1.cy.js --env url=%BASE_URL%'


            }
        }

    }
}